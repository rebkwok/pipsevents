{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="extra-top-margin container-fluid row">
    <div class="col-sm-12">
       <div class="card card-wm">
            <div class="card-header">
                <h2 class="card-title">Memberships</h2>
                </div>
            <div class="card-body">
                <h4>Memerships available:</h4>
                    {% for membership in memberships %}
                        <dt>{{ membership.name }}</dt>
                        <dd>{{ membership.description }}
                            <ul>
                                {% for membership_item in membership.membership_items.all %}
                                <li>{{ membership_item }}</li>
                                {% endfor %}
                            </ul>
                        Â£{{ membership.price }}{% if show_vat %} (incl VAT){% endif %}
                        <dd>
                    {% endfor %}
                
                {% if has_ongoing_membership %}
                    <p>You already have an active membership. View <a href="{% url 'membership_list' %}">your memberships</a> to update or cancel.</p>
                {% elif has_cancelled_current_membership %}
                    <p>You already have an active membership which ends after this month. You can create a new membership to 
                        start from next month.</p>  
                {% endif %}

                {% if not has_ongoing_membership %}
                    <p>Select a membership to add.</p>

                    <form method="post" action="{% url 'membership_checkout' %}">
                        {% csrf_token %}
                        <div class="form-group">
                            <label>Choose a membership:</label> {{ form.membership }}
                        </div>
                        <div class="form-group">
                            <label>{{ form.backdate.label }}</label> {{ form.backdate }}
                            <span class="studioadmin-help">{{ form.backdate.help_text }}</span>
                        </div>
                        <div class="form-group">
                            <label>{{ form.agree_to_terms.label }}</label> {{ form.agree_to_terms }}
                        </div>
                        <div class="form-group">
                        <input class="btn btn-wm" type="submit" value="Checkout" />
                        </div>
                    </form>
                </div>
            {% endif %}
       </div>

</div>
</div>

{% endblock content %}
